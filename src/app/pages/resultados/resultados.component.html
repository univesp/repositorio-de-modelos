<div class="resultados">

  <!-- Filtro reutilizado -->
  <app-filter 
    class="resultados__filter"
    (filtrosChanged)="aplicarFiltrosViaUrl($event.filtros)"  
    (explorarClicked)="null"
  ></app-filter>

  <!-- Botões de visualização -->
  <div class="resultados__switch-view-buttons" *ngIf="modelosFiltrados.length > 0">
    <button (click)="switchViewType('grid')">
      <mat-icon 
        class="icon-viewType" 
        aria-label="Grid View icon"
        [ngStyle]="{ 'opacity': (viewType === 'grid') ? opacityClicked : 0.6 }"
      >grid_view</mat-icon>
    </button>
    <button (click)="switchViewType('list')">
      <mat-icon 
        class="icon-viewType" 
        aria-label="List View icon"
        [ngStyle]="{ 'opacity': (viewType === 'list') ? opacityClicked : 0.6 }"
      >view_headline</mat-icon>
    </button>

    <!-- Select de Ordenação -->
    <div class="ordenacao-container">
      <select class="ordenacao-select" 
              [(ngModel)]="ordenacaoSelecionada"
              (change)="aplicarOrdenacao()">
        <option value="">Ordenar Por:</option>
        <option value="alfabetica">Ordem Alfabética</option>
        <option value="recentes">Mais Recentes</option>
      </select>
      <mat-icon class="ordenacao-icon">arrow_drop_down</mat-icon>
    </div>

    <!-- Contador de resultados com badges interativos -->
    <div class="resultados-contador">
      <div class="contador-texto">
        Exibindo {{ modelosFiltrados.length }} resultado(s) para:
      </div>
      <div class="filtros-badges" *ngIf="filtrosAtivos.length > 0">
        <span class="filtro-badge" *ngFor="let filtro of filtrosAtivos; let i = index">
          {{ getTextoBadge(filtro) }}
          <button 
            class="badge-close" 
            (click)="removerFiltro(filtro, $event)" 
            aria-label="Remover filtro"
            title="Remover filtro">
            <mat-icon>close</mat-icon>
          </button>
        </span>
      </div>
      <div class="contador-texto" *ngIf="filtrosAtivos.length === 0">
        Exibindo {{ modelosFiltrados.length }} resultado(s) encontrado(s)
      </div>
    </div>
  </div>

  <!-- Lista filtrada de modelos -->
  <div class="resultados__resultados-container">
    <ng-container *ngIf="modelosFiltrados.length > 0">
      <app-explorar-grid 
        *ngIf="viewType === 'grid'" 
        [modelosList]="modelosFiltrados"
        (modeloSelecionado)="abrirModelo($event)">
      </app-explorar-grid>

      <app-explorar-list 
        *ngIf="viewType === 'list'" 
        [modelosList]="modelosFiltrados"
        (modeloSelecionado)="abrirModelo($event)">
      </app-explorar-list>
    </ng-container>
    
    <!-- Exibe a mensagem se não houver resultados -->
    <div *ngIf="modelosFiltrados.length === 0" class="no-results-message">
      <h2>Nenhum resultado encontrado para os filtros aplicados.</h2>
      <p>Tente ajustar seus critérios de busca ou redefinir os filtros.</p>
    </div>
  </div>

</div>
