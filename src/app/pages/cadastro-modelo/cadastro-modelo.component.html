<div class="cadastro-modelo">
  <!-- Filtro reutilizado -->
  <app-filter
   class="cadastro-modelo__filter"
   (filtrosChanged)="null"
   (explorarClicked)="null">
  </app-filter>

  <div class="cadastro-modelo__container">

    <h1>Envie um Modelo</h1>
    <span>Por favor, preencha todos os campos abaixo com as informações solicitadas para cadastrar o modelo no repositório.</span>

    <form>

      <!-- Informações Básicas -->
      <span class="cadastro-modelo__titulo-secao">Informações Básicas</span>

      <!-- Formato (Campo Obrigatório) -->
      <span class="titulo-info">Formato <span class="obrigatório">*</span></span>
      <div class="cadastro-modelo__formato-container">
        
        <div>
          <input type="radio" id="reaUnivesp" name="formato" value="reaUnivesp">
            <label for="reaUnivesp">REA Univesp</label>
        </div>

        <div>
          <input type="radio" id="recursoProgramacao" name="formato" value="recursoProgramacao">
            <label for="recursoProgramacao">Recurso de Programação</label>
        </div>

        <div>
          <input type="radio" id="formatoSite" name="formato" value="formatoSite">
            <label for="formatoSite">Site</label>
        </div>

        <div>
          <input type="radio" id="formatoJogo" name="formato" value="formatoJogo">
            <label for="formatoJogo">Jogo</label>
        </div>

        <div>
          <input type="radio" id="modeloExterno" name="formato" value="modeloExterno">
            <label for="modeloExterno">Modelo Externo</label>
        </div>
        
      </div>

      <!-- Título (Campo Obrigatório) -->
      <span class="titulo-info">Título <span class="obrigatório">*</span></span>
      <input class="input-text" type="text" placeholder="Escreva Aqui">
      <span class="detalhe-campo-forms">Insira um título claro e conciso para o recurso/modelo. (ex.: "Jogo da Forca Interativo")</span>

      <!-- Descrição (Campo Obrigatório) -->
      <span class="titulo-info">Descrição <span class="obrigatório">*</span></span>
      <textarea class="input-textArea" cols="30" rows="10" placeholder="Escreva Aqui"></textarea>
      <span class="detalhe-campo-forms">Forneça uma descrição completa do recurso, incluindo suas principais caraterísticas e funcionalidades.</span>

      <!-- URL -->
      <span class="titulo-info">URL</span>
      <input class="input-text" type="text" placeholder="https://">
      <span class="detalhe-campo-forms">Confira o link</span>

      <!-- Tags (Campo Obrigatório) -->
      <div class="mb-4" style="margin-top: 30px;"> <!-- Adicionei mb-4 para espaçamento -->
        <span class="titulo-info">Tags <span class="obrigatório">*</span></span>
        <div class="tags-input-container">
          <!-- Itera sobre o array 'tags' do componente TypeScript -->
          <div *ngFor="let tag of tags" class="tag-chip">
            <span class="tag-text">{{ tag }}</span>
            <!-- Botão para remover a tag, chamando a função removeTag do componente -->
            <button type="button" class="remove-tag" (click)="removeTag(tag)">x</button>
          </div>
          <input
            type="text"
            class="tags-input"
            placeholder="Adicionar tags (separe por Enter)"
            [(ngModel)]="currentTagInput"
            (keyup.comma)="addTagFromInput()"
            (blur)="addTagFromInput()"
            (keyup.enter)="addTagFromInput($event)"
            name="tagInput" 
            [disabled]="tags.length >= maxTags"
          >
        </div>
        <!-- Exibe o limite de tags restantes dinamicamente -->
        <span class="detalhe-campo-forms">Insira palavras-chave relacionadas ao recurso para facilitar a busca (separe por Enter). Limite: {{ maxTags - tags.length }} restantes.</span>
        <!-- Mensagem de erro de validação simples para tags (mostra se não houver tags) -->
        
      </div>
      <!-- Fim do campo de Tags -->

      <!-- Imagem de Capa (Campo Obrigatório) -->
      <span class="titulo-info">Imagem de Capa <span class="obrigatório">*</span></span>
      <span class="detalhe-campo-forms" style="margin-left: 0; margin-bottom: 25px;">Selecione a imagem de capa do recurso. Tamanho Ideal: 500px x 280px. Formatos aceitos: PNG, JPG e JPEG</span>
      <div class="image-upload-container">
        <!-- Input de arquivo OCULTO -->
        <input
          type="file"
          id="carregaImagem"
          (change)="onFileSelected($event)"
          accept=".png, .jpg, .jpeg"
          style="display: none;"
        >
        <!-- Label estilizada como botão -->
        <label for="carregaImagem" class="cadastro-modelo__button">
          Carregar Imagem
        </label>

        <!-- Pré-visualização da imagem e botão de remover -->
        <div *ngIf="imagePreviewUrl" class="image-preview-container">
          <img [src]="imagePreviewUrl" alt="Pré-visualização da imagem" class="image-preview">
          <button type="button" class="remove-image-button" (click)="removeImage()">
            Remover Imagem
          </button>
        </div>

        <!-- Mensagem de erro da imagem -->
        <div *ngIf="imageErrorMessage" class="image-error-message text-red-600 text-xs mt-1">
          {{ imageErrorMessage }}
        </div>
      </div>
      <!-- Fim do Campo de Imagem -->

    </form>

  </div>
</div>
