<!-- tags.component.html -->
<div class="tags-container">
  <!-- Filtro reutilizado -->
  <app-filter
   class="tags-container__filter"
   (filtrosChanged)="null"
   (explorarClicked)="null">
  </app-filter>

  <div class="tags-container__contentBox">
    
    <!-- LOADING STATE -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="loading-spinner"></div>
      <p>Carregando tags...</p>
    </div>

    <div *ngIf="!isLoading" class="tags-content">
      <div class="tags-header">
        <span class="tags-container__title">
          {{ textoExibicao }}
        </span>
        
        <div class="controles-container">
          <!-- Campo de Pesquisa -->
          <div class="pesquisa-container">
            <div class="search-wrapper">
              <input 
                type="text" 
                [(ngModel)]="termoPesquisa"
                (input)="onPesquisaChange()"
                placeholder="Pesquisar tags..."
                class="pesquisa-input"
              >
              <button 
                *ngIf="termoPesquisa"
                (click)="limparPesquisa()"
                class="clear-button"
                type="button">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </div>

          <!-- Select de Ordenação -->
          <div class="ordenacao-container">
            <label for="ordenacao">Ordenar por:</label>
            <select 
              id="ordenacao" 
              [(ngModel)]="ordenacaoSelecionada"
              (change)="onOrdenacaoChange()"
              class="ordenacao-select">
              <option value="populares">Mais populares</option>
              <option value="alfabetica">Ordem Alfabética</option>
            </select>
          </div>
        </div>
      </div>

      <!-- LISTA DE TAGS -->
      <div *ngIf="tagsOrdenadas.length > 0" class="tags-container__items">
        <span 
          class="tag-item" 
          *ngFor="let tagInfo of tagsOrdenadas"
          [title]="'Encontrada em ' + tagInfo.count + ' modelo(s). Clique para filtrar.'"
          (click)="onTagClick(tagInfo)">
          {{ tagInfo.tag }} <span class="tag-count">({{ tagInfo.count }})</span>
        </span>
      </div>

      <!-- MENSAGEM QUANDO NÃO ENCONTRA RESULTADOS -->
      <div *ngIf="!isLoading && tagsOrdenadas.length === 0" class="sem-resultados">
        <mat-icon class="sem-resultados-icon">search_off</mat-icon>
        <p *ngIf="termoPesquisa">Nenhuma tag encontrada para "{{ termoPesquisa }}"</p>
        <p *ngIf="!termoPesquisa">Nenhuma tag encontrada no sistema.</p>
      </div>
    </div>
  </div>
</div>